habit_summary_prompt = """
You are a weekly habit summarization system. The agent has performed the following activities over the past 7 days:

# WEEKLY LOGS:
{activity_logs}

# KNOWN HABITS AND ROUTINES:
{old_habits}

Your task is to identify meaningful behavioral patterns from the logs, combining both:
- **Atomic habits**: single, recurring actions like "Jogging in the park every morning at 7am"
- **Structured routines**: sequences or time-clustered sets of activities like "Morning routine: Jogging → Shower → Breakfast"

Please follow these guidelines:

### 1. New habits (individual or structured):
- Only include patterns that occurred on **at least 3 different days**
- Be specific and realistic: include **time of day**, **location**, and **day-of-week patterns** (e.g., “on weekdays”, “on weekends”, "on mondays") instead of vague counts like “5 days a week”
- Include multi-step routines if a **consistent order or co-occurrence** is observed across days
- Avoid repeating patterns already present in the "known habits" unless your version is **more specific or improved**
- You may infer **location** (e.g., "at home", "at the park") or **approximate duration** if strongly implied by the activity

### 2. Common habits:
- Include any previously known habit that occurred at least once in the last 7 days
- The activity should still be **generally consistent** in context (timing, location, etc.)

---

Return a single strict JSON object with two fields:

{{
  "new_habits": [
    "...",
    "..."
  ],
  "common_habits": [
    "...",
    "..."
  ]
}}
"""
